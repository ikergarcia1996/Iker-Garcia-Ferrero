<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
  <head>
    <meta charset="UTF-8">

{% seo %}
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="preload" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700&display=swap" as="style" type="text/css" crossorigin>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
    {% include head-custom.html %}
  </head>
  <body>
    <a id="skip-to-content" href="#content">Skip to the content.</a>

    <header class="page-header" role="banner">
      <h1 class="project-name">{{ page.title | default: site.title | default: site.github.repository_name }}</h1>
      <nav aria-label="Primary">
        <a href="{{ '/' | relative_url }}" class="btn">About Me</a>
        {% for page in site.pages %}
          {% if page.button_title and page.filename %}
            <a href="{{ page.filename | relative_url }}" class="btn">{{ page.button_title }}</a>
          {% endif %}
        {% endfor %}
      </nav>
    </header>
    <main id="content" class="main-content" role="main">
      {{ content }}

       

    </main>

    <script>
      (function(){
        const header = document.querySelector('.page-header');
        if (!header) return;
        let target = {x: 0.1, y: 0.2};
        let current = {x: 0.1, y: 0.2};
        let interacting = false;
        let lastMove = 0;
        const reduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

        function lerp(a, b, t) { return a + (b - a) * t; }

        function onMove(e){
          const rect = header.getBoundingClientRect();
          const px = (e.clientX - rect.left) / rect.width;
          const py = (e.clientY - rect.top) / rect.height;
          target.x = Math.max(0.02, Math.min(0.98, px));
          target.y = Math.max(0.02, Math.min(0.98, py));
          interacting = true;
          lastMove = performance.now();
          header.classList.add('is-interactive');
        }

        function tick(now){
          // Autonomous drift (disabled if reduced-motion)
          if (!interacting){
            const t = now * 0.00006; // slow time base
            const ampX = reduceMotion ? 0.015 : 0.05;
            const ampY = reduceMotion ? 0.012 : 0.04;
            const bx = 0.12 + ampX * Math.sin(t * 2.0);
            const by = 0.22 + ampY * Math.cos(t * 1.4);
            target.x = bx;
            target.y = by;
          }

          // If user stopped moving for a while, fall back to drift
          if (interacting && now - lastMove > 1200){
            interacting = false;
            header.classList.remove('is-interactive');
          }

          current.x = lerp(current.x, target.x, 0.06);
          current.y = lerp(current.y, target.y, 0.06);
          const g1x = (current.x * 100).toFixed(2) + '%';
          const g1y = (current.y * 100).toFixed(2) + '%';
          const g2x = (100 - current.x * 100).toFixed(2) + '%';
          const g2y = (current.y * 100 * 0.7 + 10).toFixed(2) + '%';
          const g3x = (50 + (current.x - 0.5) * 20).toFixed(2) + '%';
          const g3y = (80 + (current.y - 0.5) * 20).toFixed(2) + '%';
          header.style.setProperty('--g1x', g1x);
          header.style.setProperty('--g1y', g1y);
          header.style.setProperty('--g2x', g2x);
          header.style.setProperty('--g2y', g2y);
          header.style.setProperty('--g3x', g3x);
          header.style.setProperty('--g3y', g3y);

          requestAnimationFrame(tick);
        }

        header.addEventListener('pointermove', onMove, { passive: true });
        header.addEventListener('pointerleave', () => {
          interacting = false;
          header.classList.remove('is-interactive');
        });
        header.addEventListener('click', () => {
          header.classList.add('header--pulse');
          setTimeout(() => header.classList.remove('header--pulse'), 220);
        });

        // Start loop (always)
        requestAnimationFrame(tick);
      })();
    </script>
  </body>
</html>
